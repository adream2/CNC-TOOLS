<view class="container">
  <view class="page-header">
    <text class="page-title">G型螺纹查询</text>
  </view>
  <view class="selector-section">
    <view class="selector-item">
      <text class="label">螺纹规格：</text>
      <picker
        class="picker"
        range="{{specificationList}}"
        range-key="label"
        value="{{specificationIndex}}"
        bindchange="bindSpecificationChange"
      >
        {{specificationList[specificationIndex].label}}
      </picker>
    </view>
    <view class="selector-item">
      <text class="label">精度等级：</text>
      <radio-group class="radio-group" bindchange="bindToleranceChange">
        <label class="radio-label"
          wx:for="{{toleranceList}}"
          wx:key="index"
        >
          <radio value="{{index}}" checked="{{index === toleranceIndex}}" />
          <text class="radio-text">{{item}}</text>
        </label>
      </radio-group>
    </view>
  </view>

  <view class="result-section" wx:if="{{threadData}}">
    <view class="result-title">螺纹参数 (GB/T 7307-2001)</view>
    <view class="result-table">
      <view class="table-row header">
        <view class="table-cell">参数</view>
        <view class="table-cell">数值</view>
        <view class="table-cell">单位</view>
      </view>
      <view class="table-row">
        <view class="table-cell">每25.4mm牙数 (n)</view>
        <view class="table-cell">{{threadData.n}}</view>
        <view class="table-cell">牙</view>
      </view>
      <view class="table-row">
        <view class="table-cell">螺距 (P)</view>
        <view class="table-cell">{{threadData.p}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">牙高 (h)</view>
        <view class="table-cell">{{threadData.h}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">大径 (d)</view>
        <view class="table-cell">{{threadData.d}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">中径 (d2)</view>
        <view class="table-cell">{{threadData.d2}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">小径 (d1)</view>
        <view class="table-cell">{{threadData.d1}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row header">
        <view class="table-cell" colspan="3">内螺纹偏差 (mm)</view>
      </view>
      <view class="table-row">
        <view class="table-cell">大径上偏差 (es)</view>
        <view class="table-cell">{{threadData.internal.major.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">大径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.internal.major.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">中径上偏差 (es)</view>
        <view class="table-cell">{{threadData.internal.pitch.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">中径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.internal.pitch.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">小径上偏差 (es)</view>
        <view class="table-cell">{{threadData.internal.minor.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">小径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.internal.minor.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row header">
        <view class="table-cell" colspan="3">外螺纹偏差 (mm)</view>
      </view>
      <view class="table-row">
        <view class="table-cell">大径上偏差 (es)</view>
        <view class="table-cell">{{threadData.external[toleranceValue].major.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">大径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.external[toleranceValue].major.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">中径上偏差 (es)</view>
        <view class="table-cell">{{threadData.external[toleranceValue].pitch.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">中径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.external[toleranceValue].pitch.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">小径上偏差 (es)</view>
        <view class="table-cell">{{threadData.external[toleranceValue].minor.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">小径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.external[toleranceValue].minor.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row header">
        <view class="table-cell" colspan="3">外螺纹偏差 ({{toleranceList[toleranceIndex]}}) (mm)</view>
      </view>
      <view class="table-row">
        <view class="table-cell">大径上偏差 (es)</view>
        <view class="table-cell">{{threadData.external[toleranceList[toleranceIndex]].major.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">大径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.external[toleranceList[toleranceIndex]].major.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">中径上偏差 (es)</view>
        <view class="table-cell">{{threadData.external[toleranceList[toleranceIndex]].pitch.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">中径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.external[toleranceList[toleranceIndex]].pitch.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">小径上偏差 (es)</view>
        <view class="table-cell">{{threadData.external[toleranceList[toleranceIndex]].minor.es}}</view>
        <view class="table-cell">mm</view>
      </view>
      <view class="table-row">
        <view class="table-cell">小径下偏差 (ei)</view>
        <view class="table-cell">{{threadData.external[toleranceList[toleranceIndex]].minor.ei}}</view>
        <view class="table-cell">mm</view>
      </view>
    </view>
  </view>
</view>